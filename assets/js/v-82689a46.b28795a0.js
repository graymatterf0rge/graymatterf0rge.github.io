"use strict";(self.webpackChunkafternoon_grocery_store=self.webpackChunkafternoon_grocery_store||[]).push([[8459],{7286:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-82689a46",path:"/blogs/backEnd/2017/110102.html",title:"mongoDB设置权限登陆后，在keystonejs中创建新的数据库连接实例",lang:"zh-CN",frontmatter:{title:"mongoDB设置权限登陆后，在keystonejs中创建新的数据库连接实例",date:"2017-11-01T00:00:00.000Z",tags:["mongoDB","keystoneJS"],categories:["backEnd"]},excerpt:"",headers:[{level:2,title:"问题",slug:"问题",children:[]},{level:2,title:"解决",slug:"解决",children:[]}],git:{createdTime:159076981e4,updatedTime:159076981e4,contributors:[{name:"reco_luan",email:"recoluan@outlook.com",commits:1}]}}},9792:(n,s,a)=>{a.r(s),a.d(s,{default:()=>b});var e=a(6252);const o=(0,e._)("h2",{id:"问题",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#问题","aria-hidden":"true"},"#"),(0,e.Uk)(" 问题")],-1),t=(0,e._)("p",null,"mongoDB的默认登陆时无密码登陆的，为了安全起见，需要给mongoDB设置权限登录，但是keystoneJS默认是无密码登陆的，这是需要修改配置来解决问题",-1),r=(0,e._)("h2",{id:"解决",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#解决","aria-hidden":"true"},"#"),(0,e.Uk)(" 解决")],-1),p=(0,e.Uk)("在keystone.js中找到配置初始化方法，添加一个"),l={href:"http://keystonejs.com/zh/docs/configuration/#options-database",target:"_blank",rel:"noopener noreferrer"},c=(0,e.Uk)("mongo"),i=(0,e.Uk)("对象来设置mongoDB连接实例，"),u=(0,e.uE)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>keystone<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token string">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;recoluan&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;brand&#39;</span><span class="token operator">:</span> <span class="token string">&#39;recoluan&#39;</span><span class="token punctuation">,</span>\n  <span class="token string">&#39;mongo&#39;</span><span class="token operator">:</span> <span class="token string">&#39;mongodb://user:password@host:port/dbName&#39;</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这里需要注意的是，mongoDB在设置权限登录的时候，首先必须设置一个权限最大的主账户，它用来增删其他普通账户，记住，这个主账户时 <strong><em>无法</em></strong> 用来设置mongo对象的， 你需要用这个主账户创建一个数据库（下面称“dbName”），然后在这个dbName上再创建一个可读写dbName的普通账户，这个普通账户的user和password和dbName用来配置mongo对象</p>',2),d=(0,e.Uk)("个人博客："),k={href:"http://recoluan.gitlab.io",target:"_blank",rel:"noopener noreferrer"},m=(0,e._)("strong",null,"午后南杂",-1),g={},b=(0,a(3744).Z)(g,[["render",function(n,s){const a=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[o,t,r,(0,e._)("p",null,[p,(0,e._)("a",l,[c,(0,e.Wm)(a)]),i]),u,(0,e._)("p",null,[d,(0,e._)("a",k,[m,(0,e.Wm)(a)])])],64)}]])}}]);