"use strict";(self.webpackChunkafternoon_grocery_store=self.webpackChunkafternoon_grocery_store||[]).push([[3508],{7353:(e,a,o)=>{o.r(a),o.d(a,{data:()=>r});const r={key:"v-0051280e",path:"/blogs/frontEnd/2017/121501.html",title:"vue路由history模式下刷新页面404",lang:"zh-CN",frontmatter:{title:"vue路由history模式下刷新页面404",date:"2017-12-15T00:00:00.000Z",tags:["vue"],categories:["frontEnd"]},excerpt:'<h2 id="原因" tabindex="-1"><a class="header-anchor" href="#原因" aria-hidden="true">#</a> 原因</h2>\n<p>vue的路由是由js来控制的，但是，当你刷新浏览器的时候，是向服务器发送请求的一个过程，当访问不到的时候必然会返回404。</p>\n',headers:[{level:2,title:"原因",slug:"原因",children:[]},{level:2,title:"解决办法",slug:"解决办法",children:[{level:3,title:"后台配合",slug:"后台配合",children:[]},{level:3,title:"仿真路由",slug:"仿真路由",children:[]}]}],git:{createdTime:159076981e4,updatedTime:159076981e4,contributors:[{name:"reco_luan",email:"recoluan@outlook.com",commits:1}]}}},7399:(e,a,o)=>{o.r(a),o.d(a,{default:()=>n});var r=o(6252);const t=(0,r.uE)('<h2 id="原因" tabindex="-1"><a class="header-anchor" href="#原因" aria-hidden="true">#</a> 原因</h2><p>vue的路由是由js来控制的，但是，当你刷新浏览器的时候，是向服务器发送请求的一个过程，当访问不到的时候必然会返回404。</p><h2 id="解决办法" tabindex="-1"><a class="header-anchor" href="#解决办法" aria-hidden="true">#</a> 解决办法</h2><h3 id="后台配合" tabindex="-1"><a class="header-anchor" href="#后台配合" aria-hidden="true">#</a> 后台配合</h3><p>将请求同意指向一个有效地址。</p><p>比如，你的首页请求地址为 <code>www.aaa.com/go.html</code> ，但是路由变为<code>www.aaa.com/main</code>，这时候你可以与后端人员商量，将 <code>www.aaa.com/...</code> 统统指向 <code>www.aaa.com/go.html</code> ，这样就解决了404问题。</p><h3 id="仿真路由" tabindex="-1"><a class="header-anchor" href="#仿真路由" aria-hidden="true">#</a> 仿真路由</h3><p>路由后带.html后缀。</p><p>我遇到一个问题，就是页面初次加载时是携带参数的， <code>www.aaa.com/go.html?p=123</code> ，根据参数p决定是跳转路由A还是路由B，加入跳转到了路由A，也就是 <code>www.aaa.com/routerA</code> ，这时候刷新，就会出现404问题，这时候后端人员帮忙解释解决不了的，因为还需要携带参数。 我的解决办法是：</p><ol><li>先将路由仿真：也就是将 <code>/routerA</code> 变为 <code>/routerA.html</code> ，冰袋跳转时谢丹参数，<code>this.$router.push({path: /routerA.html${this.$router.query.p}})</code>，所以刷新时，会向服务端请求 <code>routerA.html</code> ，并且携带参数p；</li><li>这时在 <code>www.aaa.com</code> 下真的存放一个 <code>routerA.html</code> ，在文件里面获取参数p，然后跳转 <code>window.location.href=&#39;www.aaa.com/go.html?p=123&#39;</code>。</li></ol>',10),d=(0,r.Uk)("个人博客："),c={href:"http://recoluan.gitlab.io",target:"_blank",rel:"noopener noreferrer"},l=(0,r._)("strong",null,"午后南杂",-1),h={},n=(0,o(3744).Z)(h,[["render",function(e,a){const o=(0,r.up)("OutboundLink");return(0,r.wg)(),(0,r.iD)(r.HY,null,[t,(0,r._)("p",null,[d,(0,r._)("a",c,[l,(0,r.Wm)(o)])])],64)}]])}}]);